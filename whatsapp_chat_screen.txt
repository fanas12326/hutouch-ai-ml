import'package:flutter/material.dart';
import'../widgets/chat_list.dart';
import'../models/chat.dart';

classWhatsAppChatScreenextendsStatefulWidget{
@override
_WhatsAppChatScreenStatecreateState()=>_WhatsAppChatScreenState();
}

class_WhatsAppChatScreenStateextendsState<WhatsAppChatScreen>{
TextEditingControllersearchController=TextEditingController();
boolisSearching=false;
List<Chat>chatData=[
Chat(
name:'JaneDoe',
time:'3:14pm',
avatarUrl:'https://example.com/jane.jpg'),
Chat(
name:'JohnDoe',
time:'3:14pm',
avatarUrl:'https://example.com/john.jpg'),
//Addmorechatdataasneeded
];
List<Chat>filteredChatData=[];

@override
voidinitState(){
super.initState();
filteredChatData=chatData;
searchController.addListener((){
filterChats();
});
}

voidfilterChats(){
List<Chat>_chats=[];
_chats.addAll(chatData);
if(searchController.text.isNotEmpty){
_chats.retainWhere((chat){
StringsearchTerm=searchController.text.toLowerCase();
StringchatName=chat.name.toLowerCase();
returnchatName.contains(searchTerm);
});
}
setState((){
filteredChatData=_chats;
});
}

@override
Widgetbuild(BuildContextcontext){
returnDefaultTabController(
length:3,
child:Scaffold(
appBar:AppBar(
backgroundColor:Color(0xFF075E54),
title:isSearching
?TextField(
controller:searchController,
decoration:InputDecoration(
hintText:'Search...',
border:InputBorder.none,
hintStyle:TextStyle(color:Colors.white60),
),
style:TextStyle(color:Colors.white),
onChanged:(value){
if(value.isEmpty){
setState((){
isSearching=false;
filteredChatData=chatData;
});
}
},
)
:Text('WhatsApp'),
actions:[
isSearching
?IconButton(
icon:Icon(Icons.clear),
onPressed:(){
setState((){
isSearching=false;
searchController.clear();
filteredChatData=chatData;
});
},
)
:IconButton(
icon:Icon(Icons.search),
onPressed:(){
setState((){
isSearching=true;
});
},
),
IconButton(
icon:Icon(Icons.more_vert),
onPressed:(){},
),
],
bottom:TabBar(
labelColor:Colors.white,
unselectedLabelColor:Colors.white70,
indicatorColor:Colors.white,
tabs:[
Tab(text:'CHATS'),
Tab(text:'STATUS'),
Tab(text:'CALLS'),
],
),
),
body:TabBarView(
children:[
ChatList(chatData:filteredChatData),
Center(child:Text('StatusScreen')),
Center(child:Text('CallsScreen')),
],
),
floatingActionButton:FloatingActionButton(
onPressed:(){},
backgroundColor:Color(0xFF25D366),
child:Icon(Icons.message),
),
),
);
}

@override
voiddispose(){
searchController.dispose();
super.dispose();
}
}
